## Домашнее задание к занятию "12.3 Развертывание кластера на собственных серверах, лекция 1"
Поработав с персональным кластером, можно заняться проектами. Вам пришла задача подготовить кластер под новый проект.
### Задание 1: Описать требования к кластеру
Сначала проекту необходимо определить требуемые ресурсы. Известно, что проекту нужны база данных, система кеширования, а само приложение состоит из бекенда и фронтенда. Опишите, какие ресурсы нужны, если известно:

* база данных должна быть отказоустойчивой (не менее трех копий, master-slave) и потребляет около 4 ГБ ОЗУ в работе;
* кэш должен быть аналогично отказоустойчивый, более трех копий, потребление: 4 ГБ ОЗУ, 1 ядро;
* фронтенд обрабатывает внешние запросы быстро, отдавая статику: не более 50 МБ ОЗУ на каждый экземпляр;
* бекенду требуется больше: порядка 600 МБ ОЗУ и по 1 ядру на копию.

Требования: опишите, сколько нод в кластере и сколько ресурсов (ядра, ОЗУ, диск) нужно для запуска приложения. Расчет вести из необходимости запуска 5 копий фронтенда и 10 копий бекенда, база и кеш.

* нужно рабочих нод 4, характеристики одной ноды: 48Gb ОЗУ, 14CPU; </br>
* нужно управляющих нод 3, характеристики одной ноды: 2cpu, 4Gb ОЗУ.</br>

---
work notes: </br>
По расчёту минимальных требований по т.з: </br>
Frontend:  5 x 0.05Gb = 0,25Gb </br>
Backend:  10 x 0.6Gb = 6Gb + 10cpu </br>
Cash:      4 x 4Gb = 16gb + 4cpu </br>
Database:  3 x (4Gb+4Gb)(master+slave) = 24Gb </br>
Итого: 46.25Gb ОЗУ, 14CPU </br>
Как минимум подребуется 7 нод: </br>
Для обеспечения отказоустойчивости кластера потребуется минимум 6 нод. </br>
3 - Control Plane: т.к на master node у нас расположен etcd, для корректной работы etcd требуется кворум,
т.е рабочее сотояние большей части узлов etcd, в ином случае база переходит в состояние read-only и нет возможности добавления чего либо в кластер.
Узлам с master-node потребуется мнимум по 4Gb ОЗУ, и конечная вличина ОЗУ будет зависеть от объёма нагрузки на кластер </br>
3 - worker-node.Для worker-node потребуется как мнимум 3 ноды, для обеспечения распределения нагрузки и отказоустойчивости. Конечное число worker-node будет зависеть от объёма нагрузки на кластер.
Минимальное количество ОЗУ по требованиям т.з - 46.25Gb ОЗУ на каждой из worker-node </br>
1 - ingress controller: ingress controller может быть одновременно и wokrer-node, но т.к у нас это только ingress и функции только load-balancer, то 4gb ОЗУ достаточно </br>
По итогу рационально определить для кластера 7 нод след. конфигурации: </br>
Frontend:  0,25Gb ОЗУ - 1cpu </br>
Backend:  6Gb ОЗУ - 10cpu </br>
Cash:      16gb - 4cpu </br>
Database:  24Gb - 1cpu </br>
Итого: 46.25 ОЗУ + 16cpu </br>
Если кластер собирается в облаке то с последующим разширением(масштабированием) проблем нне будет, но если кластер собирается а железе, то разумно будет установить изначально объём ОЗУ с запасом, к примеру 64Gb. </br>

---
work notes: </br>
https://habr.com/ru/post/540220/ </br>
https://vc.ru/dev/181045-doktor-pomogite-u-menya-kubernetes </br>

